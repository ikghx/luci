import{u as Z,f as e,au as pe,i as t,ai as A,av as $e,aw as _e,D as x,ax as we,ay as ye,az as Ce,F,aA as Pe,aB as Se,aC as Te,aD as Le,aE as Y,g as b,aF as Ee,aG as Ne,aH as Ie,aI as De,aJ as G,aK as he,aL as ee,aM as J,P as Me,t as g,aN as ke,aO as le,S as U,aP as I,aQ as me,aR as ne,a0 as B,$ as q,ag as fe,H as te,E as Oe,W as Ae,b as Be,y as Fe,Q as Ue,R as je,A as ie,o as Re,B as W,aS as ae,a5 as He,aT as Ye,aU as ce,aV as oe,aW as de,aX as ue,l as ze}from"./index-2v-8vYjb.js";import{f as Qe}from"./global-nqLeOnSw.js";var We=g('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full">'),Xe=g('<option class="flex items-center gap-2">'),Ke=g("<option>");const Ve=l=>{const[s]=Z();return e(Me,{ref:n=>{var i;return(i=l.ref)==null?void 0:i.call(l,n)},get icon(){return e(pe,{size:24})},get title(){return s("proxiesSettings")},get children(){var n=We(),i=n.firstChild,c=i.firstChild,u=c.firstChild,m=i.nextSibling,E=m.firstChild,d=m.nextSibling,D=d.firstChild,p=d.nextSibling,S=p.firstChild,T=p.nextSibling,L=T.firstChild,v=T.nextSibling,N=v.firstChild,M=N.firstChild,_=v.nextSibling,k=_.firstChild,z=k.firstChild,X=_.nextSibling,j=X.firstChild;return t(i,e(A,{withDivider:!0,get children(){return s("autoCloseConns")}}),c),u.addEventListener("change",o=>$e(o.target.checked)),t(m,e(A,{withDivider:!0,get children(){return s("urlForLatencyTest")}}),E),E.addEventListener("change",o=>_e(o.target.value)),t(d,e(A,{withDivider:!0,get children(){return[x(()=>s("latencyTestTimeoutDuration"))," (",x(()=>s("ms")),")"]}}),D),D.addEventListener("change",o=>we(Number(o.target.value))),t(p,e(A,{withDivider:!0,get children(){return s("urlForIPv6SupportTest")}}),S),S.addEventListener("change",o=>{var w;return ye((w=o.target.value)==null?void 0:w.trim())}),t(T,e(A,{withDivider:!0,get children(){return s("proxiesSorting")}}),L),L.addEventListener("change",o=>Ce(o.target.value)),t(L,e(F,{get each(){return Object.values(Pe)},children:o=>(()=>{var w=Xe();return w.value=o,t(w,()=>s(o)),w})()})),t(v,e(A,{withDivider:!0,get children(){return s("hideUnAvailableProxies")}}),N),M.addEventListener("change",o=>Se(o.target.checked)),t(_,e(A,{withDivider:!0,get children(){return s("renderInTwoColumns")}}),k),z.addEventListener("change",o=>Te(o.target.checked)),t(X,e(A,{withDivider:!0,get children(){return s("proxiesPreviewType")}}),j),j.addEventListener("change",o=>Le(o.target.value)),t(j,e(F,{get each(){return Object.values(Y)},children:o=>(()=>{var w=Ke();return w.value=o,t(w,()=>s(o)),w})()})),b(()=>u.checked=Ee()),b(()=>E.value=Ne()),b(()=>D.value=Ie()),b(()=>S.value=De()),b(()=>L.value=G()),b(()=>M.checked=he()),b(()=>z.checked=ee()),b(()=>j.value=J()),n}})},ge=l=>{const s=()=>J()===Y.OFF,n=x(()=>l.proxyNameList.length<=10),i=x(()=>{const u=J();return u===Y.BAR||u===Y.Auto&&!n()}),c=x(()=>{const u=J();return u===Y.DOTS||u===Y.Auto&&n()});return e(U,{get when(){return!s()},get children(){return e(ke,{get children(){return[e(le,{get when(){return i()},get children(){return e(qe,{get proxyNameList(){return l.proxyNameList},get now(){return l.now}})}}),e(le,{get when(){return c()},get children(){return e(tt,{get proxyNameList(){return l.proxyNameList},get now(){return l.now}})}})]}})}})};var Je=g('<div class="flex items-center gap-2 py-2"><div class="my-1 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>');const qe=l=>{const{getLatencyByName:s}=ne(),n=x(()=>l.proxyNameList.map(d=>s(d))),i=x(()=>n().length),c=x(()=>n().filter(d=>d>I().NOT_CONNECTED&&d<=I().MEDIUM).length),u=x(()=>n().filter(d=>d>I().MEDIUM&&d<=I().HIGH).length),m=x(()=>n().filter(d=>d>I().HIGH).length),E=x(()=>n().filter(d=>d===I().NOT_CONNECTED).length);return(()=>{var d=Je(),D=d.firstChild,p=D.firstChild,S=p.nextSibling,T=S.nextSibling,L=T.nextSibling;return t(d,e(me,{get name(){return l.now}}),null),b(v=>{var N=`${c()*100/i()}%`,M=`${u()*100/i()}%`,_=`${m()*100/i()}%`,k=`${E()*100/i()}%`;return N!==v.e&&((v.e=N)!=null?p.style.setProperty("width",N):p.style.removeProperty("width")),M!==v.t&&((v.t=M)!=null?S.style.setProperty("width",M):S.style.removeProperty("width")),_!==v.a&&((v.a=_)!=null?T.style.setProperty("width",_):T.style.removeProperty("width")),k!==v.o&&((v.o=k)!=null?L.style.setProperty("width",k):L.style.removeProperty("width")),v},{e:void 0,t:void 0,a:void 0,o:void 0}),d})()};var Ze=g("<div>"),Ge=g('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">');const et=l=>{let s=l.selected?"bg-white border-4 border-success":"bg-success";return typeof l.latency!="number"||l.latency===I().NOT_CONNECTED?s=l.selected?"bg-white border-4 border-neutral":"bg-neutral":l.latency>I().HIGH?s=l.selected?"bg-white border-4 border-error":"bg-error":l.latency>I().MEDIUM&&(s=l.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{var n=Ze();return b(i=>{var c=B("h-4 w-4 rounded-full",s),u=l.name;return c!==i.e&&q(n,i.e=c),u!==i.t&&fe(n,"title",i.t=u),i},{e:void 0,t:void 0}),n})()},tt=l=>{const{getLatencyByName:s}=ne();return(()=>{var n=Ge(),i=n.firstChild;return t(i,e(F,{get each(){return l.proxyNameList.map(c=>[c,s(c)])},children:([c,u])=>{const m=l.now===c;return e(et,{name:c,latency:u,selected:m})}})),t(n,e(me,{get name(){return l.now}}),null),n})()};var nt=g("<progress class=progress max=100>"),rt=g('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),st=g('<div class="text-sm text-slate-500">: ');const lt=l=>{const{Download:s=0,Upload:n=0,Total:i=0,Expire:c=0}=l,u=te(i,{units:"iec"}),m=te(s+n,{units:"iec"}),E=Oe.toFinite(((s+n)/i*100).toFixed(2));return{total:u,used:m,percentage:E,expirePrefix:()=>{const[p]=Z();return p("expire")},expireStr:()=>{const[p]=Z();return c===0?p("noExpire"):Ae(c*1e3).format("YYYY-MM-DD")}}},it=l=>{if(!l.subscriptionInfo)return;const s=lt(l.subscriptionInfo);return[(()=>{var n=nt();return b(()=>n.value=s.percentage),n})(),(()=>{var n=rt(),i=n.firstChild,c=i.nextSibling,u=c.nextSibling,m=u.nextSibling;return m.nextSibling,t(n,()=>`${s.used}`,i),t(n,()=>`${s.total}`,c),t(n,()=>s.percentage,m),n})(),(()=>{var n=st(),i=n.firstChild;return t(n,()=>s.expirePrefix(),i),t(n,()=>s.expireStr(),null),n})()]};var ve=g("<div>"),at=g('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">'),ct=g('<button><span></span><div class="badge badge-sm">'),ot=g("<img class=h-8>"),dt=g('<div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="badge badge-sm ml-2">'),ut=g('<div class="flex items-center justify-between text-sm text-slate-500"><span> </span><span>/s'),gt=g('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),vt=g('<div class="text-sm text-slate-500"> :: <!> ');const ft=()=>{const l=Be();if(!Fe())return l("/setup",{replace:!0}),null;let s;const[n]=Z(),{fetchProxies:i,proxies:c,selectProxyInGroup:u,proxyProviders:m,updateProviderByProviderName:E,updateAllProvider:d,proxyGroupLatencyTest:D,proxyProviderLatencyTest:p,proxyGroupLatencyTestingMap:S,proxyProviderLatencyTestingMap:T,isAllProviderUpdating:L,updatingMap:v}=ne(),N=x(()=>c().filter(f=>!f.hidden)),{speedGroupByName:M}=Ue(),[_,k]=je(ie({}),{name:"collapsedMap",storage:localStorage}),z=(f,C)=>{k(V=>({...V,[f]:C}))};Re(i);const X=async(f,C)=>{f.stopPropagation(),D(C)},j=(f,C)=>{f.stopPropagation(),p(C)},o=(f,C)=>{f.stopPropagation(),E(C)},w=async f=>{f.stopPropagation(),d()},[K,be]=ie("proxies"),xe=()=>[{type:"proxies",name:n("proxies"),count:N().length},{type:"proxyProviders",name:n("proxyProviders"),count:m().length}];return(()=>{var f=at(),C=f.firstChild,V=C.firstChild,re=V.nextSibling,se=C.nextSibling;return t(V,e(F,{get each(){return xe()},children:h=>(()=>{var r=ct(),O=r.firstChild,Q=O.nextSibling;return r.$$click=()=>be(h.type),t(O,()=>h.name),t(Q,()=>h.count),b(()=>q(r,B(K()===h.type&&"tab-active","tab-sm sm:tab-md tab gap-2 px-2"))),r})()})),t(C,e(U,{get when(){return K()==="proxyProviders"},get children(){return e(W,{class:"btn btn-circle btn-sm",get disabled(){return L()},onClick:h=>w(h),get icon(){return e(ae,{get class(){return B(L()&&"animate-spin text-success")}})}})}}),re),t(re,e(W,{class:"btn-circle btn-primary btn-sm",onClick:()=>s==null?void 0:s.showModal(),get icon(){return e(He,{})}})),t(se,e(U,{get when(){return K()==="proxies"},get children(){var h=ve();return t(h,e(F,{get each(){return N()},children:r=>{const O=x(()=>Ye(ce(r.all??[],G()),he())),Q=[(()=>{var a=dt(),$=a.firstChild,P=$.firstChild,R=P.nextSibling;return t($,e(U,{get when(){return r.icon},get children(){var y=ot();return b(()=>fe(y,"src",r.icon)),y}}),P),t(P,()=>r.name),t(R,()=>{var y;return(y=r.all)==null?void 0:y.length}),t(a,e(W,{class:"btn-circle btn-sm",get disabled(){return S()[r.name]},onClick:y=>X(y,r.name),get icon(){return e(oe,{get class(){return B(S()[r.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{var a=ut(),$=a.firstChild,P=$.firstChild,R=$.nextSibling,y=R.firstChild;return t($,()=>r.type,P),t($,()=>{var H;return((H=r.now)==null?void 0:H.length)>0&&` :: ${r.now}`},null),t(R,()=>te(M()[r.name]??0).toString(),y),a})(),e(U,{get when(){return!_()[r.name]},get children(){return e(ge,{get proxyNameList(){return O()},get now(){return r.now}})}})];return e(de,{get isOpen(){return _()[r.name]},title:Q,onCollapse:a=>z(r.name,a),get children(){return e(F,{get each(){return O()},children:a=>e(ue,{proxyName:a,get isSelected(){return r.now===a},onClick:()=>void u(r,a)})})}})}})),b(()=>q(h,B("grid grid-cols-1 place-items-start gap-2",ee()?"sm:grid-cols-2":"sm:grid-cols-1"))),h}}),null),t(se,e(U,{get when(){return K()==="proxyProviders"},get children(){var h=ve();return t(h,e(F,{get each(){return m()},children:r=>{const O=x(()=>ce(r.proxies.map(a=>a.name)??[],G())),Q=[(()=>{var a=gt(),$=a.firstChild,P=$.firstChild,R=P.nextSibling,y=$.nextSibling;return t(P,()=>r.name),t(R,()=>r.proxies.length),t(y,e(W,{class:"btn btn-circle btn-sm",get disabled(){return v()[r.name]},onClick:H=>o(H,r.name),get icon(){return e(ae,{get class(){return B(v()[r.name]&&"animate-spin text-success")}})}}),null),t(y,e(W,{class:"btn btn-circle btn-sm",get disabled(){return T()[r.name]},onClick:H=>j(H,r.name),get icon(){return e(oe,{get class(){return B(T()[r.name]&&"animate-pulse text-success")}})}}),null),a})(),e(it,{get subscriptionInfo(){return r.subscriptionInfo}}),(()=>{var a=vt(),$=a.firstChild,P=$.nextSibling;return P.nextSibling,t(a,()=>r.vehicleType,$),t(a,()=>n("updated"),P),t(a,()=>Qe(r.updatedAt),null),a})(),e(U,{get when(){return!_()[r.name]},get children(){return e(ge,{get proxyNameList(){return O()}})}})];return e(de,{get isOpen(){return _()[r.name]},title:Q,onCollapse:a=>z(r.name,a),get children(){return e(F,{get each(){return O()},children:a=>e(ue,{proxyName:a})})}})}})),b(()=>q(h,B("grid grid-cols-1 place-items-start gap-2",ee()?"sm:grid-cols-2":"sm:grid-cols-1"))),h}}),null),t(f,e(Ve,{ref:h=>s=h}),null),f})()};ze(["click"]);export{ft as default};
