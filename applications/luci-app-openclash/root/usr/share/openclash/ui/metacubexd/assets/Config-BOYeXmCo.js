import{y as V,C as ie,b3 as ce,b as J,x as oe,u as j,i as e,f as t,ai as S,S as T,t as b,z as y,b4 as de,c as K,d as Y,B as I,F as N,b5 as ue,q as ee,b6 as m,a6 as ge,_ as g,ag as B,b7 as be,b8 as pe,b9 as he,ba as ve,bb as fe,bc as me,bd as xe,be as _e,bf as $e,bg as Ce,bh as ke,bi as ye,bj as R,bk as X,bl as Se,bm as we,b2 as Ee,j as Ie,bn as De,bo as Te,bp as W,bq as Le,br as Z,bs as Pe,bt as Ae,bu as Ne,bv as Fe,bw as Be,v as le,g as je,bx as Re}from"./index-lRj6mBgc.js";const[te,Ue]=V(""),O=ie(()=>te().includes("sing-box")),Oe=()=>{ce().then(Ue)};var Ve=b('<div class="flex flex-col p-4">'),Me=b('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type=search name=name class="input input-bordered min-w-0 flex-1"placeholder=google.com><div class="flex items-center gap-2"><select name=type class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Qe=b("<div class=py-2>"),qe=b('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Ge=b('<div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class=form-control><label for=enable-allow-lan class="label gap-2"><span class=label-text></span></label><input id=enable-allow-lan type=checkbox class=toggle></div><div class=form-control><label for=enable-tun-device class="label gap-2"><span class=label-text></span></label><input id=enable-tun-device type=checkbox class=toggle></div><div class=form-control><label for=tun-ip-stack class="label gap-2"><span class=label-text></span></label><select id=tun-ip-stack class="select select-bordered flex-1"><option>Mixed</option><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class=form-control><label for=device-name class="label gap-2"><span class=label-text></span></label><input id=device-name class="input input-bordered min-w-0"></div><div class=form-control><label for=interface-name class="label gap-2"><span class=label-text></span></label><input id=interface-name class="input input-bordered min-w-0">'),ze=b('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),He=b('<div class=form-control><label class=label><span class=label-text></span></label><input type=number class="input input-bordered">'),Xe=b('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),We=b('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><div class="py-2 text-center text-lg font-semibold">&nbsp;</div></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle>'),U=b("<option>"),Ze=b('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),Je=b('<div class="grid grid-cols-2 gap-4"><kbd class=kbd></kbd><div class=relative><kbd class="kbd w-full">'),Ke=b('<div class="mx-auto flex max-w-screen-md flex-col gap-4">');const Ye=y.object({name:y.string(),type:y.string()}),el=()=>{const[l]=j(),p=de(),{form:c,isSubmitting:h}=K({extend:le({schema:Ye}),onSubmit:n=>p.get("dns/query",{searchParams:{name:n.name,type:n.type}}).json().then(({Answer:a})=>u((a==null?void 0:a.map(({data:v})=>v))||[])).catch(a=>je.error(a.message))}),[x,u]=V([]);return(()=>{var n=Me(),a=n.firstChild,v=a.firstChild,$=v.nextSibling;return $.firstChild,Y(c,a,()=>c),e($,t(I,{type:"submit",class:"btn-primary",get loading(){return h()},get children(){return l("dnsQuery")}}),null),e(n,t(T,{get when(){return x().length>0},get children(){var C=Ve();return e(C,t(N,{get each(){return x()},children:D=>(()=>{var f=Qe();return e(f,D),f})()})),C}}),null),n})()},ll=y.object({port:y.number(),"socks-port":y.number(),"redir-port":y.number(),"tproxy-port":y.number(),"mixed-port":y.number()}),tl=()=>{const[l]=j(),p=[{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:a=>void m("mixed-port",Number(a.target.value),n)},{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:a=>void m("port",Number(a.target.value),n)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:a=>void m("socks-port",Number(a.target.value),n)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:a=>void m("redir-port",Number(a.target.value),n)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:a=>void m("tproxy-port",Number(a.target.value),n)}],{form:c,setInitialValues:h,reset:x}=K({extend:le({schema:ll})}),[u,{refetch:n}]=ue(Re);return ee(()=>{const a=u();a&&(h(a),x())}),(()=>{var a=ze(),v=a.firstChild,$=v.firstChild,C=$.nextSibling,D=C.nextSibling,f=v.nextSibling;return v.addEventListener("change",r=>void m("mode",r.target.value,n)),e($,()=>l("global")),e(C,()=>l("rule")),e(D,()=>l("direct")),e(a,t(T,{get when(){return!O()},get children(){return[(()=>{var r=qe();return Y(c,r,()=>c),e(r,t(N,{each:p,children:o=>(()=>{var _=He(),w=_.firstChild,k=w.firstChild,d=w.nextSibling;return e(k,()=>o.label()),ge(d,"change",o.onChange),g(i=>{var F=o.key,L=o.key,P=o.key,A=o.label();return F!==i.e&&B(w,"for",i.e=F),L!==i.t&&B(d,"id",i.t=L),P!==i.a&&B(d,"name",i.a=P),A!==i.o&&B(d,"placeholder",i.o=A),i},{e:void 0,t:void 0,a:void 0,o:void 0}),_})()})),r})(),(()=>{var r=Ge(),o=r.firstChild,_=o.firstChild,w=_.firstChild,k=_.nextSibling,d=o.nextSibling,i=d.firstChild,F=i.firstChild,L=i.nextSibling,P=d.nextSibling,A=P.firstChild,ae=A.firstChild,M=A.nextSibling,Q=P.nextSibling,q=Q.firstChild,ne=q.firstChild,G=q.nextSibling,re=Q.nextSibling,z=re.firstChild,se=z.firstChild,H=z.nextSibling;return e(w,()=>l("allowLan")),k.addEventListener("change",s=>void m("allow-lan",s.target.checked,n)),e(F,()=>l("enableTunDevice")),L.addEventListener("change",s=>void m("tun",{enable:s.target.checked},n)),e(ae,()=>l("tunModeStack")),M.addEventListener("change",s=>void m("tun",{stack:s.target.value},n)),e(ne,()=>l("tunDeviceName")),G.addEventListener("change",s=>void m("tun",{device:s.target.value},n)),e(se,()=>l("interfaceName")),H.addEventListener("change",s=>void m("interface-name",s.target.value,n)),g(()=>{var s;return k.checked=(s=u())==null?void 0:s["allow-lan"]}),g(()=>{var s,E;return L.checked=(E=(s=u())==null?void 0:s.tun)==null?void 0:E.enable}),g(()=>{var s,E;return M.value=(E=(s=u())==null?void 0:s.tun)==null?void 0:E.stack}),g(()=>{var s,E;return G.value=(E=(s=u())==null?void 0:s.tun)==null?void 0:E.device}),g(()=>{var s;return H.value=(s=u())==null?void 0:s["interface-name"]}),r})()]}}),f),e(f,t(I,{class:"btn-primary",get loading(){return be()},onClick:pe,get children(){return l("reloadConfig")}}),null),e(f,t(I,{class:"btn-accent",get loading(){return he()},onClick:ve,get children(){return l("flushFakeIP")}}),null),e(f,t(I,{class:"btn-warning",get loading(){return fe()},onClick:me,get children(){return l("restartCore")}}),null),e(f,t(T,{get when(){return!O()},get children(){return[t(I,{class:"btn-secondary",get loading(){return xe()},onClick:_e,get children(){return l("updateGEODatabases")}}),t(I,{class:"btn-info",get loading(){return $e()},onClick:Ce,get children(){return l("upgradeUI")}}),t(I,{class:"btn-error",get loading(){return ke()},onClick:ye,get children(){return l("upgradeCore")}})]}}),null),g(()=>{var r;return v.value=(r=u())==null?void 0:r.mode}),g(()=>$.value=R.Global),g(()=>C.value=R.Rule),g(()=>D.value=R.Direct),a})()},al=()=>{const[l]=j(),p=J(),c=[{label:()=>l("en"),value:X.EN},{label:()=>l("zh"),value:X.ZH}];return(()=>{var h=We(),x=h.firstChild,u=x.firstChild,n=u.firstChild,a=u.nextSibling,v=a.firstChild,$=a.nextSibling;$.firstChild;var C=x.nextSibling,D=C.firstChild,f=D.firstChild;return e(u,t(S,{get children(){return l("useTwemoji")}}),n),n.addEventListener("change",r=>Se(r.target.checked)),e(a,t(S,{get children(){return l("switchLanguage")}}),v),v.addEventListener("change",r=>we(r.target.value)),e(v,t(N,{each:c,children:r=>(()=>{var o=U();return e(o,()=>r.label()),g(()=>o.selected=Ee()===r.value),g(()=>o.value=r.value),o})()})),e($,t(I,{class:"btn-info",onClick:()=>{Ie(""),p(De.Setup)},get children(){return l("switchEndpoint")}}),null),e(D,t(S,{get children(){return l("autoSwitchTheme")}}),f),f.addEventListener("change",r=>Te(r.target.checked)),e(C,t(T,{get when(){return W()},get children(){var r=Xe(),o=r.firstChild,_=o.firstChild,w=o.nextSibling,k=w.firstChild;return e(o,t(S,{get children(){return l("favDayTheme")}}),_),_.addEventListener("change",d=>Le(d.target.value)),e(_,t(N,{each:Z,children:d=>(()=>{var i=U();return i.value=d,e(i,d),i})()})),e(w,t(S,{get children(){return l("favNightTheme")}}),k),k.addEventListener("change",d=>Pe(d.target.value)),e(k,t(N,{each:Z,children:d=>(()=>{var i=U();return i.value=d,e(i,d),i})()})),g(()=>_.value=Ae()),g(()=>k.value=Ne()),r}}),null),g(()=>n.checked=Fe()),g(()=>f.checked=W()),h})()},nl=({backendVersion:l})=>{const[p,c]=V(!1);return ee(async()=>{const h=l();h&&c(await Be(h))}),(()=>{var h=Je(),x=h.firstChild,u=x.nextSibling,n=u.firstChild;return e(x,()=>"1.144.2"),e(u,t(T,{get when(){return p()},get children(){return Ze()}}),n),e(n,l),h})()},sl=()=>{const l=J();if(!oe())return l("/setup",{replace:!0}),null;const[p]=j();return Oe(),(()=>{var c=Ke();return e(c,t(T,{get when(){return!O()},get children(){return[t(S,{withDivider:!0,get children(){return p("dnsQuery")}}),t(el,{})]}}),null),e(c,t(S,{withDivider:!0,get children(){return p("coreConfig")}}),null),e(c,t(tl,{}),null),e(c,t(S,{withDivider:!0,get children(){return p("xdConfig")}}),null),e(c,t(al,{}),null),e(c,t(S,{withDivider:!0,get children(){return p("version")}}),null),e(c,t(nl,{backendVersion:te}),null),c})()};export{sl as default};
