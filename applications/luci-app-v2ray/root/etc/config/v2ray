
config v2ray 'main'
	option enabled '0'
	option v2ray_file '/usr/bin/v2ray'
	option asset_location '/usr/share/v2ray'
	option mem_percentage '0'
	option loglevel 'warning'
	option access_log '/dev/null'
	option error_log '/var/log/v2ray-error.log'
	list inbounds 'dokodemo_door'
	list outbounds 'proxy'
	list outbounds 'dns_out'
	list outbounds 'direct'
	list outbounds 'block'

config inbound 'socks_proxy'
	option alias 'socks_proxy'
	option listen '0.0.0.0'
	option port '1080'
	option protocol 'socks'
	option s_socks_auth 'noauth'
	option s_socks_udp '1'
	option s_socks_ip '127.0.0.1'
	option sniffing_enabled '1'
	list sniffing_dest_override 'http'
	list sniffing_dest_override 'tls'

config inbound 'dokodemo_door'
	option alias 'dokodemo_door'
	option port '1081'
	option protocol 'dokodemo-door'
	option tag 'transparent'
	option sniffing_enabled '1'
	list sniffing_dest_override 'http'
	list sniffing_dest_override 'tls'

config outbound 'proxy'
	option alias 'proxy'
	option protocol 'vmess'
	option tag 'proxy'
	option s_vmess_address 'www.baidu.com'
	option s_vmess_port '443'
	option s_vmess_user_id 'b831381d-6324-4d53-ad4f-8cda48b30811'
	option s_vmess_user_alter_id '0'
	option s_vmess_user_security 'auto'
	option ss_network 'ws'
	option ss_security 'tls'
	option ss_tls_server_name 'www.baidu.com'
	option ss_tls_allow_insecure '1'
	option ss_websocket_path 'ray'
	option s_xtls_flow 'none'

config outbound 'dns_out'
	option alias 'dns_out'
	option protocol 'dns'
	option tag 'dns_out'
	option ss_security 'none'

config outbound 'direct'
	option alias 'direct'
	option protocol 'freedom'
	option tag 'direct'
	option ss_security 'none'
	option s_freedom_domain_strategy 'UseIP'

config outbound 'block'
	option protocol 'blackhole'
	option ss_security 'none'
	option s_blackhole_reponse_type 'http'
	option tag 'blocked'
	option alias 'block'

config dns 'main_dns'
	option enabled '1'
	option query_strategy 'UseIP'
	list servers 'Cloudflare'
	list servers 'OpenDNS'
	list servers 'DNSPod'
	list servers 'AliDNS'

config dns_server 'Cloudflare'
	option alias 'Cloudflare'
	list domains 'geosite:geolocation-!cn'
	list expect_ips 'geoip:!cn'
	option address 'https://1.1.1.1/dns-query'

config dns_server 'OpenDNS'
	list domains 'geosite:geolocation-!cn'
	list expect_ips 'geoip:!cn'
	option alias 'Google'
	option address 'https://8.8.8.8/dns-query'

config dns_server 'DNSPod'
	option alias 'DNSPod'
	option address '119.29.29.29'
	option port '53'
	option skip_fallback '1'
	list domains 'geosite:cn'
	list domains 'geosite:icloud'
	list domains 'geosite:category-games@cn'
	list expect_ips 'geoip:cn'

config dns_server 'AliDNS'
	option alias 'AliDNS'
	option address '223.5.5.5'
	option port '53'
	option skip_fallback '1'
	list domains 'geosite:cn'
	list domains 'geosite:icloud'
	list domains 'geosite:category-games@cn'
	list expect_ips 'geoip:cn'

config routing 'main_routing'
	option enabled '1'
	option domain_strategy 'IPIfNonMatch'
	option domain_matcher 'mph'
	list rules 'BT'
	list rules 'NTP'
	list rules 'hijack_dns'
	list rules 'direct_dns'
	list rules 'proxy_dns'
	list rules 'global_direct'
	list rules 'cn_ip'
	list rules 'cn_domain'
	list rules 'gfw_proxy'
	list rules 'other'

config routing_rule 'BT'
	option alias 'BT'
	option type 'field'
	list protocol 'bittorrent'
	option outbound_tag 'direct'

config routing_rule 'NTP'
	option alias 'NTP'
	option type 'field'
	list port '123'
	list network 'udp'
	option outbound_tag 'direct'

config routing_rule 'hijack_dns'
	option alias 'hijack_dns'
	option type 'field'
	list network 'udp'
	list port '53'
	list inbound_tag 'transparent'
	option outbound_tag 'dns_out'

config routing_rule 'direct_dns'
	option alias 'direct_dns'
	option type 'field'
	option outbound_tag 'direct'
	list ip '114.114.114.114'
	list ip '114.114.115.115'
	list ip '223.5.5.5'
	list ip '223.6.6.6'
	list ip '119.29.29.29'
	list ip '180.76.76.76'
	list ip '1.2.4.8'
	list ip '210.2.4.8'
	list ip '2402:4e00::'
	list ip '2400:3200::1'

config routing_rule 'proxy_dns'
	option alias 'proxy_dns'
	option type 'field'
	option outbound_tag 'proxy'
	list ip '1.1.1.1'
	list ip '1.0.0.1'
	list ip '8.8.8.8'
	list ip '8.8.4.4'
	list ip '9.9.9.9'
	list ip '208.67.222.222'
	list ip '208.67.220.220'
	list ip '2606:4700:4700::1111'
	list ip '2001:4860:4860::8888'

config routing_rule 'block_ad'
	option alias 'block_ad'
	option type 'field'
	list domain 'geosite:category-ads-all'
	option outbound_tag 'block'

config routing_rule 'global_direct'
	option alias 'global_direct'
	option type 'field'
	list ip 'geoip:private'
	option outbound_tag 'direct'

config routing_rule 'cn_ip'
	option alias 'cn_ip'
	option type 'field'
	list ip 'geoip:cn'
	option outbound_tag 'direct'

config routing_rule 'cn_domain'
	option alias 'cn_domain'
	option type 'field'
	list domain 'geosite:cn'
	list domain 'geosite:tld-cn'
	list domain 'geosite:icloud'
	list domain 'geosite:category-games@cn'
	option outbound_tag 'direct'

config routing_rule 'gfw_proxy'
	option alias 'gfw_proxy'
	option type 'field'
	list domain 'geosite:geolocation-!cn'
	option outbound_tag 'proxy'

config routing_rule 'other'
	option alias 'other'
	option type 'field'
	list network 'tcp'
	list network 'udp'
	option outbound_tag 'proxy'

config routing_balancer 'routing_balancer_1'
	option tag 'balancer'
	list selector 'a1'
	list selector 'a2'
	list selector 'a3'
	option strategy_type 'random'

config routing 'main_observatory'
	option enabled '0'

config policy 'main_policy'
	option enabled '0'

config policy_level 'policy_level_0'
	option level '0'
	option handshake '4'
	option conn_idle '300'
	option uplink_only '2'
	option downlink_only '5'
	option buffer_size '0'

config reverse 'main_reverse'
	option enabled '0'
	list bridges 'bridge|test.v2ray.com'
	list portals 'portal|test.v2ray.com'

config transparent_proxy 'main_transparent_proxy'
	option redirect_port '1081'
	option proxy_mode 'default'
	option apnic_delegated_mirror 'apnic'
	option gfwlist_mirror 'github'
	option use_tproxy '1'
	option redirect_udp '1'
	list lan_ifaces 'lan'

