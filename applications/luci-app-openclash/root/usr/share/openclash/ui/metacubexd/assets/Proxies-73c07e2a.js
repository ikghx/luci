import{c as e,H as ve,i as r,A as m,F as D,b as P,d as v,aq as me,ar as K,S as O,t as F,g as ae,D as fe,f as $e,as as xe,h as Z,q as be,_ as _e,U as pe,k as we,at as G,M as ye,Q as ee,e as Ce}from"./vendor-0f159d83.js";import{u as Y,I as Pe,J as Se,K as Te,N as Ne,P as Le,O as Ee,Q as Me,R as B,S as De,U as Ie,V as ke,W,X as ce,Y as j,M as Oe,Z as L,_ as oe,$ as X,B as R,a0 as Ae,a1 as te,a2 as ne,a3 as re}from"./index-26b8b771.js";import{f as Ue}from"./global-b979f772.js";import{C as U}from"./ConfigTitle-5a7980bc.js";const Fe=v('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class="toggle" type="checkbox"></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type="number" class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class="toggle" type="checkbox"></div></div><div><select class="select select-bordered w-full">'),Be=v('<option class="flex items-center gap-2">'),Re=v("<option>"),He=t=>{const[l]=Y();return e(Oe,{ref:n=>{var i;return(i=t.ref)==null?void 0:i.call(t,n)},get icon(){return e(ve,{size:24})},get title(){return l("proxiesSettings")},get children(){const n=Fe(),i=n.firstChild,c=i.firstChild,o=c.firstChild,g=i.nextSibling,h=g.firstChild,u=g.nextSibling,E=u.firstChild,$=u.nextSibling,x=$.firstChild,y=$.nextSibling,M=y.firstChild,f=M.firstChild,S=y.nextSibling,_=S.firstChild;return r(i,e(U,{withDivider:!0,get children(){return l("autoCloseConns")}}),c),o.addEventListener("change",d=>Pe(d.target.checked)),r(g,e(U,{withDivider:!0,get children(){return l("urlForLatencyTest")}}),h),h.addEventListener("change",d=>Se(d.target.value)),r(u,e(U,{withDivider:!0,get children(){return[m(()=>l("latencyTestTimeoutDuration"))," (",m(()=>l("ms")),")"]}}),E),E.addEventListener("change",d=>Te(Number(d.target.value))),r($,e(U,{withDivider:!0,get children(){return l("proxiesSorting")}}),x),x.addEventListener("change",d=>Ne(d.target.value)),r(x,e(D,{get each(){return Object.values(Le)},children:d=>(()=>{const b=Be();return b.value=d,r(b,()=>l(d)),b})()})),r(y,e(U,{withDivider:!0,get children(){return l("hideUnAvailableProxies")}}),M),f.addEventListener("change",d=>Ee(d.target.checked)),r(S,e(U,{withDivider:!0,get children(){return l("proxiesPreviewType")}}),_),_.addEventListener("change",d=>Me(d.target.value)),r(_,e(D,{get each(){return Object.values(B)},children:d=>(()=>{const b=Re();return b.value=d,r(b,()=>l(d)),b})()})),P(()=>o.checked=De()),P(()=>h.value=Ie()),P(()=>E.value=ke()),P(()=>x.value=W()),P(()=>f.checked=ce()),P(()=>_.value=j()),n}})},se=t=>{const l=()=>j()===B.OFF,n=m(()=>t.proxyNameList.length<=10),i=m(()=>{const o=j();return o===B.BAR||o===B.Auto&&!n()}),c=m(()=>{const o=j();return o===B.DOTS||o===B.Auto&&n()});return e(O,{get when(){return!l()},get children(){return e(me,{get children(){return[e(K,{get when(){return i()},get children(){return e(Ye,{get proxyNameList(){return t.proxyNameList},get now(){return t.now}})}}),e(K,{get when(){return c()},get children(){return e(Xe,{get proxyNameList(){return t.proxyNameList},get now(){return t.now}})}})]}})}})},je=v('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 overflow-hidden rounded-2xl"><div class="h-2 bg-success"></div><div class="h-2 bg-warning"></div><div class="h-2 bg-error"></div><div class="h-2 bg-neutral">'),Ye=t=>{const{latencyMap:l}=X(),n=m(()=>t.proxyNameList.map(u=>l()[u])),i=m(()=>n().length),c=m(()=>n().filter(u=>u>L().NOT_CONNECTED&&u<=L().MEDIUM).length),o=m(()=>n().filter(u=>u>L().MEDIUM&&u<=L().HIGH).length),g=m(()=>n().filter(u=>u>L().HIGH).length),h=m(()=>n().filter(u=>u===L().NOT_CONNECTED).length);return(()=>{const u=je(),E=u.firstChild,$=E.firstChild,x=$.nextSibling,y=x.nextSibling,M=y.nextSibling;return r(u,e(oe,{get name(){return t.now}}),null),P(f=>{const S=`${c()*100/i()}%`,_=`${o()*100/i()}%`,d=`${g()*100/i()}%`,b=`${h()*100/i()}%`;return S!==f._v$&&((f._v$=S)!=null?$.style.setProperty("width",S):$.style.removeProperty("width")),_!==f._v$2&&((f._v$2=_)!=null?x.style.setProperty("width",_):x.style.removeProperty("width")),d!==f._v$3&&((f._v$3=d)!=null?y.style.setProperty("width",d):y.style.removeProperty("width")),b!==f._v$4&&((f._v$4=b)!=null?M.style.setProperty("width",b):M.style.removeProperty("width")),f},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u})()},ze=v("<div>"),Qe=v('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">'),We=t=>{let l=t.selected?"bg-white border-4 border-success":"bg-success";return typeof t.latency!="number"||t.latency===L().NOT_CONNECTED?l=t.selected?"bg-white border-4 border-neutral":"bg-neutral":t.latency>L().HIGH?l=t.selected?"bg-white border-4 border-error":"bg-error":t.latency>L().MEDIUM&&(l=t.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const n=ze();return P(i=>{const c=F("h-4 w-4 rounded-full",l),o=t.name;return c!==i._v$&&ae(n,i._v$=c),o!==i._v$2&&fe(n,"title",i._v$2=o),i},{_v$:void 0,_v$2:void 0}),n})()},Xe=t=>{const{latencyMap:l}=X();return(()=>{const n=Qe(),i=n.firstChild;return r(i,e(D,{get each(){return t.proxyNameList.map(c=>[c,l()[c]])},children:([c,o])=>{const g=t.now===c;return e(We,{name:c,latency:o,selected:g})}})),r(n,e(oe,{get name(){return t.now}}),null),n})()},le=v('<div class="flex flex-1 flex-col gap-2">'),qe=v('<div class="flex flex-col gap-2 sm:flex-row">'),ie=t=>{const l=$e(()=>t.children),n=xe(),i=m(()=>n.width>=640),c=m(()=>l.toArray().filter((g,h)=>h%2===0)),o=m(()=>l.toArray().filter((g,h)=>h%2===1));return(()=>{const g=qe();return r(g,e(O,{get when(){return i()},get fallback(){return t.children},get children(){return[(()=>{const h=le();return r(h,c),h})(),(()=>{const h=le();return r(h,o),h})()]}})),g})()},Ve=v('<progress class="progress" max="100">'),Je=v('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),Ke=v('<div class="text-sm text-slate-500">: '),Ze=t=>{const{Download:l=0,Upload:n=0,Total:i=0,Expire:c=0}=t,o=Z(i,{units:"iec"}),g=Z(l+n,{units:"iec"}),h=be.toFinite(((l+n)/i*100).toFixed(2));return{total:o,used:g,percentage:h,expirePrefix:()=>{const[$]=Y();return $("expire")},expireStr:()=>{const[$]=Y();return c===0?$("noExpire"):_e(c*1e3).format("YYYY-MM-DD")}}},Ge=t=>{if(!t.subscriptionInfo)return;const l=Ze(t.subscriptionInfo);return[(()=>{const n=Ve();return P(()=>n.value=l.percentage),n})(),(()=>{const n=Je(),i=n.firstChild,c=i.nextSibling,o=c.nextSibling,g=o.nextSibling;return g.nextSibling,r(n,()=>`${l.used}`,i),r(n,()=>`${l.total}`,c),r(n,()=>l.percentage,g),n})(),(()=>{const n=Ke(),i=n.firstChild;return r(n,()=>l.expirePrefix(),i),r(n,()=>l.expireStr(),null),n})()]},et=v('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class="ml-auto"></div></div><div class="flex-1 overflow-y-auto">'),tt=v('<button><span></span><div class="badge badge-sm">'),nt=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm">'),rt=v('<div class="text-sm text-slate-500"> '),st=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),lt=v('<div class="text-sm text-slate-500"> :: <!> ');var k=function(t){return t.proxyProviders="proxyProviders",t.proxies="proxies",t}(k||{});const dt=()=>{let t;const[l]=Y(),{fetchProxies:n,proxies:i,selectProxyInGroup:c,latencyMap:o,proxyProviders:g,updateProviderByProviderName:h,updateAllProvider:u,proxyGroupLatencyTest:E,proxyProviderLatencyTest:$,collapsedMap:x,setCollapsedMap:y,proxyGroupLatencyTestingMap:M,proxyProviderLatencyTestingMap:f,isAllProviderUpdating:S,updatingMap:_}=X();pe(n);const d=async(p,T)=>{p.stopPropagation(),E(T)},b=(p,T)=>{p.stopPropagation(),$(T)},de=(p,T)=>{p.stopPropagation(),h(T)},ue=async p=>{p.stopPropagation(),u()},[H,ge]=we(k.proxies),he=()=>[{type:k.proxies,name:l("proxies"),count:i().length},{type:k.proxyProviders,name:l("proxyProviders"),count:g().length}];return(()=>{const p=et(),T=p.firstChild,q=T.firstChild,V=q.nextSibling,J=T.nextSibling;return r(q,e(D,{get each(){return he()},children:s=>(()=>{const C=tt(),A=C.firstChild,a=A.nextSibling;return C.$$click=()=>ge(s.type),r(A,()=>s.name),r(a,()=>s.count),P(()=>ae(C,F(H()===s.type&&"tab-active","tab tab-sm gap-2 px-2 sm:tab-md"))),C})()})),r(T,e(O,{get when(){return H()===k.proxyProviders},get children(){return e(R,{class:"btn btn-circle btn-sm",get disabled(){return S()},onClick:s=>ue(s),get icon(){return e(G,{get class(){return F(S()&&"animate-spin text-success")}})}})}}),V),r(V,e(R,{class:"btn-circle btn-sm sm:btn-md",onClick:()=>t==null?void 0:t.showModal(),get icon(){return e(ye,{})}})),r(J,e(O,{get when(){return H()===k.proxies},get children(){return e(ie,{get children(){return e(D,{get each(){return i()},children:s=>{const C=m(()=>Ae(te(s.all??[],o(),W()),o(),ce())),A=[(()=>{const a=nt(),N=a.firstChild,w=N.firstChild,z=w.nextSibling;return r(w,()=>s.name),r(z,()=>{var I;return(I=s.all)==null?void 0:I.length}),r(a,e(R,{class:"btn-circle btn-sm",get disabled(){return M()[s.name]},onClick:I=>d(I,s.name),get icon(){return e(ee,{get class(){return F(M()[s.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{const a=rt(),N=a.firstChild;return r(a,()=>s.type,N),r(a,()=>{var w;return((w=s.now)==null?void 0:w.length)>0&&` :: ${s.now}`},null),a})(),e(O,{get when(){return!x()[s.name]},get children(){return e(se,{get proxyNameList(){return C()},get now(){return s.now}})}})];return e(ne,{get isOpen(){return x()[s.name]},title:A,onCollapse:a=>y(s.name,a),get children(){return e(D,{get each(){return C()},children:a=>e(re,{proxyName:a,get isSelected(){return s.now===a},onClick:()=>void c(s,a)})})}})}})}})}}),null),r(J,e(O,{get when(){return H()===k.proxyProviders},get children(){return e(ie,{get children(){return e(D,{get each(){return g()},children:s=>{const C=m(()=>te(s.proxies.map(a=>a.name)??[],o(),W())),A=[(()=>{const a=st(),N=a.firstChild,w=N.firstChild,z=w.nextSibling,I=N.nextSibling;return r(w,()=>s.name),r(z,()=>s.proxies.length),r(I,e(R,{class:"btn btn-circle btn-sm",get disabled(){return _()[s.name]},onClick:Q=>de(Q,s.name),get icon(){return e(G,{get class(){return F(_()[s.name]&&"animate-spin text-success")}})}}),null),r(I,e(R,{class:"btn btn-circle btn-sm",get disabled(){return f()[s.name]},onClick:Q=>b(Q,s.name),get icon(){return e(ee,{get class(){return F(f()[s.name]&&"animate-pulse text-success")}})}}),null),a})(),e(Ge,{get subscriptionInfo(){return s.subscriptionInfo}}),(()=>{const a=lt(),N=a.firstChild,w=N.nextSibling;return w.nextSibling,r(a,()=>s.vehicleType,N),r(a,()=>l("updated"),w),r(a,()=>Ue(s.updatedAt),null),a})(),e(O,{get when(){return!x()[s.name]},get children(){return e(se,{get proxyNameList(){return C()}})}})];return e(ne,{get isOpen(){return x()[s.name]},title:A,onCollapse:a=>y(s.name,a),get children(){return e(D,{get each(){return C()},children:a=>e(re,{proxyName:a})})}})}})}})}}),null),r(p,e(He,{ref:s=>t=s}),null),p})()};Ce(["click"]);export{dt as default};
