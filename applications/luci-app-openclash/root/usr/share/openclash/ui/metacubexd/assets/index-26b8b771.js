import{s as Le,a as ke,m as _e,t as T,i as p,c as l,S,b as I,d as b,e as G,f as ie,g as M,h as Me,j as m,k as u,l as Ie,n as Ne,r as qe,o as Ue,p as H,u as ce,q as z,v as je,w as F,x as de,y as Ae,z as ze,A as R,B as Fe,I as Re,C as J,F as W,D as O,E as Be,G as Ge,H as He,J as Oe,K as We,L as Xe,M as Ve,N as Ze,O as Je,P as Ee,Q as Qe,R as Ke,T as Ye,U as et,V as tt,W as P,X as st,Y as at,Z as N,_ as nt,$ as ot,a0 as rt,a1 as lt,a2 as it}from"./vendor-0f159d83.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const ct="modulepreload",dt=function(e,t){return new URL(e,t).href},Q={},q=function(t,o,a){if(!o||o.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(o.map(n=>{if(n=dt(n,a),n in Q)return;Q[n]=!0;const r=n.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(!!a)for(let g=s.length-1;g>=0;g--){const h=s[g];if(h.href===n&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${i}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":ct,r||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),r)return new Promise((g,h)=>{d.addEventListener("load",g),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n})},ut=b('<div class="loading loading-spinner">'),pt=b('<button><span class="truncate rounded-none">'),ue=e=>{const[t,o]=Le(e,["class","loading","icon"]);return(()=>{const a=pt(),s=a.firstChild;return ke(a,_e({get class(){return T("btn flex items-center",t.loading?"btn-disabled":t.class)}},o),!1,!0),p(a,l(S,{get when(){return t.loading},get children(){return ut()}}),s),p(s,()=>e.icon||e.children),I(()=>s.classList.toggle("flex-1",!t.icon)),a})()},gt=b('<div><div class="collapse-title pr-4 text-xl font-medium after:!top-8"></div><div>'),Fs=e=>{const{title:t,onCollapse:o}=e,a=()=>{const n="collapse-open",r="collapse-close";return e.isOpen?n:r},s=()=>{const n="opacity-100",r="opacity-0";return e.isOpen?n:r};return(()=>{const n=gt(),r=n.firstChild,i=r.nextSibling;return r.$$click=()=>o(!e.isOpen),p(r,t),p(i,l(S,{get when(){return e.isOpen},get children(){return ie(()=>e.children)()}})),I(c=>{const d=T(a(),"collapse collapse-arrow select-none border-secondary bg-base-200 shadow-md"),g=T(s(),"collapse-content grid grid-cols-2 gap-2 transition-opacity duration-1000 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5");return d!==c._v$&&M(n,c._v$=d),g!==c._v$2&&M(i,c._v$2=g),c},{_v$:void 0,_v$2:void 0}),n})()};G(["click"]);const mt=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"];var v=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e.Setup="/setup",e))(v||{});const ft=10,Rs={title:{align:"center",style:{color:"gray",fontSize:"16px"}},chart:{toolbar:{show:!1},zoom:{enabled:!1},animations:{easing:"linear"}},noData:{text:"Loading..."},legend:{showForSingleSeries:!0,fontSize:"16px",labels:{colors:"gray"},itemMargin:{horizontal:32}},dataLabels:{enabled:!1},grid:{yaxis:{lines:{show:!1}}},stroke:{curve:"smooth"},tooltip:{enabled:!1},xaxis:{range:ft,labels:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"gray",fontSize:"13px"},formatter:e=>Me(e).toString()}}};var E=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(E||{}),pe=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=800]="MEDIUM",e[e.HIGH=1500]="HIGH",e))(pe||{}),ge=(e=>(e.OFF="off",e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(ge||{}),k=(e=>(e.NATURAL="orderNatural",e.LATENCY_ASC="orderLatency_asc",e.LATENCY_DESC="orderLatency_desc",e.NAME_ASC="orderName_asc",e.NAME_DESC="orderName_desc",e))(k||{}),B=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(B||{}),me=(e=>(e.Details="details",e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.SniffHost="sniffHost",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.ConnectTime="connectTime",e.SourceIP="sourceIP",e.SourcePort="sourcePort",e.Destination="destination",e))(me||{});const K=200,fe=Object.values(me),ht={...Object.fromEntries(fe.map(e=>[e,!0])),ID:!1};var _=(e=>(e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e))(_||{}),vt=(e=>(e.Global="global",e.Rule="rule",e.Direct="direct",e))(vt||{}),he=(e=>(e.Info="info",e.Error="error",e.Warning="warning",e.Debug="debug",e.Silent="silent",e))(he||{});const yt=[200,300,500,800,1e3],bt=yt[0],xt={add:"Add",overview:"Overview",proxies:"Proxies",proxiesSettings:"Proxies Settings",rules:"Rules",connections:"Connections",connectionsSettings:"Connections Settings",connectionsDetails:"Connections Details",logs:"Logs",logsSettings:"Logs Settings",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",sniffHost:"Sniff Host",chains:"Chains",connectTime:"Time",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",sourceIP:"Source IP",sourcePort:"Source Port",destination:"Destination",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",off:"Off",proxiesPreviewType:"Proxies preview type",urlForLatencyTest:"URL for latency test",autoCloseConns:"Automatically Close connections",useTwemoji:"Use Twemoji Mozilla Font",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme",renderInTwoColumns:"Render in two columns",updateGEODatabases:"Update GEO Databases",restartCore:"Restart Core",upgradeCore:"Upgrade Core",proxiesSorting:"Proxies Sorting",orderNatural:"Original order in config file",orderLatency_asc:"By latency from low to high",orderLatency_desc:"By latency from high to low",orderName_asc:"By name alphabetically (A-Z)",orderName_desc:"By name alphabetically (Z-A)",ms:"ms",updated:"Updated",tableSize:"Table size",logLevel:"Log Level",info:"info",silent:"silent",debug:"debug",warning:"warning",error:"error",logMaxRows:"Log Maximum Reserved Rows",xs:"Extra small size",sm:"Small size",md:"Normal size",lg:"Large size",switchEndpoint:"Switch Endpoint",switchLanguage:"Switch Language",latencyTestTimeoutDuration:"Latency Test Timeout Duration",all:"All",sequence:"Sequence",payload:"Payload",details:"Details",endpointURL:"Endpoint URL",secret:"Secret",global:"Global",rule:"Rule",direct:"Direct",active:"Active",closed:"Closed",sort:"Sort",hideUnAvailableProxies:"Hide UnAvailable Proxies",reloadConfig:"Reload Config",flushFakeIP:"Flush Fake-IP",tagClientSourceIPWithName:"Tag Client Source IP With Name",tag:"Tag",coreConfig:"Core Config",xdConfig:"XD Config",version:"Version",expire:"Expire",noExpire:"Null",enableTunDevice:"Enable TUN Device",tunModeStack:"TUN Mode Stack",tunDeviceName:"TUN Device Name",interfaceName:"Interface Name",en:"English",zh:"Chinese",port:"{{ name }} Port"},wt={add:"添加",overview:"概览",proxies:"代理",proxiesSettings:"代理设置",rules:"规则",connections:"连接",connectionsSettings:"连接设置",connectionsDetails:"连接详情",logs:"日志",logsSettings:"日志设置",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",sniffHost:"嗅探域名",chains:"链路",connectTime:"连接时间",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",sourceIP:"源地址",sourcePort:"源端口",destination:"目标地址",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",off:"关闭",proxiesPreviewType:"节点组预览样式",urlForLatencyTest:"测速链接",autoCloseConns:"自动断开连接",useTwemoji:"使用 Twemoji Mozilla 字体",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好",renderInTwoColumns:"双列渲染",updateGEODatabases:"更新 GEO 数据库",restartCore:"重启核心",upgradeCore:"更新核心",proxiesSorting:"节点排序",orderNatural:"原配置文件中的排序",orderLatency_asc:"按延迟从低到高",orderLatency_desc:"按延迟从高到低",orderName_asc:"按名称字母排序 (A-Z)",orderName_desc:"按名称字母排序 (Z-A)",ms:"毫秒",updated:"更新于",tableSize:"表格大小",logLevel:"日志等级",info:"信息",silent:"静默",debug:"调试",warning:"警告",error:"错误",logMaxRows:"日志最大保留行数",xs:"超小尺寸",sm:"小尺寸",md:"正常尺寸",lg:"超大尺寸",switchEndpoint:"切换后端",switchLanguage:"切换语言",latencyTestTimeoutDuration:"测速超时时间",all:"全部",sequence:"序列号",payload:"内容",details:"详情",endpointURL:"后端地址",secret:"密钥",global:"全局",rule:"规则",direct:"直连",active:"活动",closed:"已关闭",sort:"排序",hideUnAvailableProxies:"隐藏不可用节点",reloadConfig:"重载配置",flushFakeIP:"清空 Fake-IP",tagClientSourceIPWithName:"为客户端源 IP 地址添加名称标记",tag:"标记",coreConfig:"核心配置",xdConfig:"XD 配置",version:"版本",expire:"到期时间",noExpire:"不限时",enableTunDevice:"开启 TUN 转发",tunModeStack:"TUN 模式堆栈",tunDeviceName:"TUN 设备名称",interfaceName:"接口名称",en:"英文",zh:"中文",port:"{{ name }} 端口"},ve={[B.EN]:xt,[B.ZH]:wt},[Ct,Bs]=m(u(Reflect.has(ve,navigator.language)?navigator.language:B.EN),{name:"lang",storage:localStorage}),[Pt,$t]=Ie(e=>[Ne(()=>Ue(ve[e.locale]),qe)]),ye=()=>$t(),[Gs,Hs]=m(u(ge.Auto),{name:"proxiesPreviewType",storage:localStorage}),[Os,Ws]=m(u(k.NATURAL),{name:"proxiesOrderingType",storage:localStorage}),[Xs,Vs]=m(u(!1),{name:"hideUnAvailableProxies",storage:localStorage}),[X,Zs]=m(u("https://www.gstatic.com/generate_204"),{name:"urlForLatencyTest",storage:localStorage}),[Dt,Js]=m(u(!1),{name:"autoCloseConns",storage:localStorage}),[Tt,Es]=m(u(!0),{name:"useTwemoji",storage:localStorage}),[St,Qs]=m(u(!1),{name:"autoSwitchTheme",storage:localStorage}),[Lt,Ks]=m(u("lofi"),{name:"favDayTheme",storage:localStorage}),[kt,Ys]=m(u("business"),{name:"favNightTheme",storage:localStorage}),[ea,ta]=m(u(_.XS),{name:"connectionsTableSize",storage:localStorage}),[sa,aa]=m(u(ht),{name:"connectionsTableColumnVisibility",storage:localStorage}),[na,oa]=m(u(fe),{name:"connectionsTableColumnOrder",storage:localStorage}),[ra,la]=m(u([]),{name:"clientSourceIPTags",storage:localStorage}),[ia,ca]=m(u(_.XS),{name:"logsTableSize",storage:localStorage}),[da,ua]=m(u(he.Info),{name:"logLevel",storage:localStorage}),[pa,ga]=m(u(bt),{name:"logMaxRows",storage:localStorage}),ma=e=>{let t="table-xs";switch(e){case _.XS:t="table-xs";break;case _.SM:t="table-sm";break;case _.MD:t="table-md";break;case _.LG:t="table-lg";break}return t},[Y,fa]=m(u(5e3),{name:"latencyTestTimeoutDuration",storage:localStorage}),_t=()=>X().startsWith("https"),$=()=>_t()?pe:E,[Mt,be]=u([]),[xe,It]=u(null),ha=()=>{const[e,t]=u([]),[o,a]=u([]),[s,n]=u(!1);return H(()=>{var i;const r=(i=xe())==null?void 0:i.connections;r&&ce(()=>{const c=we(r,o());if(Nt(o()),!s()){const d=qt(c,Mt());a(c),t(d.slice(-K))}be(d=>d.slice(-(c.length+K)))})}),{closedConnections:e,activeConnections:o,paused:s,setPaused:n}},we=(e,t)=>{const o=new Map;return t.forEach(a=>o.set(a.id,a)),e.map(a=>{const s=o.get(a.id);return!s||!z.isNumber(s.download)||!z.isNumber(s.upload)?{...a,downloadSpeed:0,uploadSpeed:0}:{...a,downloadSpeed:a.download-s.download,uploadSpeed:a.upload-s.upload}})},Nt=e=>{be(t=>z.unionWith(t,e,(o,a)=>o.id===a.id))},qt=(e,t)=>z.differenceWith(t,e,(o,a)=>o.id===a.id),va=()=>f().delete("connections"),Ut=e=>f().delete(`connections/${e}`),[ya,ee]=u(!1),[ba,te]=u(!1),[xa,se]=u(!1),[wa,ae]=u(!1),[Ca,ne]=u(!1),Pa=async()=>{const e=f();ee(!0);try{await e.put("configs",{searchParams:{force:!0},json:{path:"",payload:""}})}catch{}ee(!1)},$a=async()=>{const e=f();se(!0);try{await e.post("cache/fakeip/flush")}catch{}se(!1)},Da=async()=>{const e=f();te(!0);try{await e.post("configs/geo")}catch{}te(!1)},Ta=async()=>{const e=f();ae(!0);try{await e.post("upgrade")}catch{}ae(!1)},Sa=async()=>{const e=f();ne(!0);try{await e.post("restart")}catch{}ne(!1)},La=()=>f().get("configs").json(),ka=async(e,t,o)=>{try{await f().patch("configs",{json:{[e]:t}}).json(),await o()}catch(a){je.error(a.message)}},_a=async()=>{const e=f(),{version:t}=await e.get("version").json();return t},jt=()=>f().get("providers/proxies").json(),At=()=>f().get("proxies").json(),oe=e=>f().put(`providers/proxies/${e}`),Ce=e=>f().get(`providers/proxies/${e}/healthcheck`,{timeout:5*1e3}).json(),zt=(e,t)=>f().put(`proxies/${e}`,{body:JSON.stringify({name:t})}),Ft=(e,t,o,a)=>{const s=f();return t!==""?Ce(t).then(n=>({delay:n[e]})):s.get(`proxies/${e}/delay`,{searchParams:{url:o,timeout:a}}).json()},Rt=(e,t,o)=>f().get(`group/${e}/delay`,{searchParams:{url:t,timeout:o}}).json(),Ma=()=>f().get("rules").json(),Ia=()=>f().get("providers/rules").json(),Na=e=>f().put(`providers/rules/${e}`),qa=async e=>{const t=/(alpha|beta|meta)-?(\w+)/.exec(e);if(!t)return!1;const o=t[1],a=t[2];if(o==="meta"){const{assets:s}=await F.get("https://api.github.com/repos/MetaCubeX/Clash.Meta/releases/latest").json();return!s.some(({name:r})=>r.includes(a))}if(o==="alpha"){const{assets:s}=await F.get("https://api.github.com/repos/MetaCubeX/Clash.Meta/releases/tags/Prerelease-Alpha").json();return!s.some(({name:r})=>r.includes(a))}return!1},Ua=e=>/^https?/.test(e)?e:`${window.location.protocol}//${e}`,A=()=>{const[e,t]=u({}),o=(s,n)=>{t({...e(),[s]:n})};return{map:e,set:o,setWithCallback:async(s,n)=>{o(s,!0);try{await n()}catch{}o(s,!1)}}},Bt=(e="")=>{const t=e.toLowerCase();return t.includes("shadowsocks")?t.replace("shadowsocks","ss"):t==="hysteria"?"hy":t==="wireguard"?"wg":t},Gt=(e="")=>{const t=e.toLowerCase();return!["selector","direct","reject","urltest","loadbalance","fallback","relay"].includes(t)},ja=(e,t,o)=>o===k.NATURAL?e:e.sort((a,s)=>{const n=t[a],r=t[s];switch(o){case k.LATENCY_ASC:return n===$().NOT_CONNECTED?1:r===$().NOT_CONNECTED?-1:n-r;case k.LATENCY_DESC:return n===$().NOT_CONNECTED?1:r===$().NOT_CONNECTED?-1:r-n;case k.NAME_ASC:return a.localeCompare(s);case k.NAME_DESC:return s.localeCompare(a);default:return 0}}),Aa=(e,t,o)=>o?e.filter(a=>t[a]!==$().NOT_CONNECTED):e,{map:Ht,set:Ot}=A(),{map:Wt,setWithCallback:Xt}=A(),{map:Vt,setWithCallback:Zt}=A(),{map:Jt,setWithCallback:Et}=A(),{map:Qt,setWithCallback:Kt}=A(),[Yt,re]=u(!1),[es,ts]=u([]),[le,ss]=u([]),[Pe,V]=u({}),[$e,as]=u({}),ns=e=>{const t={...$e()},o={...Pe()};e.forEach(a=>{var h;const{udp:s,xudp:n,type:r,now:i,name:c,provider:d=""}=a,g=((h=a.history.at(-1))==null?void 0:h.delay)||$().NOT_CONNECTED;t[a.name]={udp:s,xudp:n,type:r,now:i,name:c,provider:d},o[a.name]=g}),de(()=>{as(t),V(o)})},Z=()=>{const e=async()=>{const[{providers:i},{proxies:c}]=await Promise.all([jt(),At()]),d=[...c.GLOBAL.all??[],"GLOBAL"],g=Object.values(c).filter(y=>{var x;return(x=y.all)==null?void 0:x.length}).sort((y,x)=>d.indexOf(y.name)-d.indexOf(x.name)),h=Object.values(i).filter(y=>y.name!=="default"&&y.vehicleType!=="Compatible"),L=[...Object.values(c),...h.flatMap(y=>y.proxies.filter(x=>!(x.name in c)).map(x=>({...x,provider:y.name})))];de(()=>{ts(g),ss(h),ns(L)})};return{collapsedMap:Ht,setCollapsedMap:Ot,proxyLatencyTestingMap:Wt,proxyGroupLatencyTestingMap:Vt,proxyProviderLatencyTestingMap:Jt,updatingMap:Qt,isAllProviderUpdating:Yt,proxies:es,proxyProviders:le,proxyLatencyTest:(i,c)=>Xt(i,async()=>{const{delay:d}=await Ft(i,c,X(),Y());V(g=>({...g,[i]:d}))}),proxyGroupLatencyTest:i=>Zt(i,async()=>{const c=await Rt(i,X(),Y());V(d=>({...d,...c})),await e()}),latencyMap:Pe,proxyNodeMap:$e,fetchProxies:e,selectProxyInGroup:async(i,c)=>{await zt(i.name,c),await e(),Dt()&&ce(()=>{var g;const d=we(((g=xe())==null?void 0:g.connections)??[],[]);d.length>0&&d.forEach(({id:h,chains:L})=>{L.includes(i.name)&&Ut(h)})})},updateProviderByProviderName:i=>Kt(i,async()=>{try{await oe(i)}catch{}await e()}),updateAllProvider:async()=>{re(!0);try{await Promise.allSettled(le().map(i=>oe(i.name))),await e()}finally{re(!1)}},proxyProviderLatencyTest:i=>Et(i,async()=>{await Ce(i),await e()})}},[os,za]=m(u(""),{name:"selectedEndpoint",storage:localStorage}),[rs,Fa]=m(u([]),{name:"endpointList",storage:localStorage}),f=()=>{const e=D();if(!e)return F.create({});const t=new Headers;return e.secret&&t.set("Authorization",`Bearer ${e.secret}`),F.create({prefixUrl:e.url,headers:t})},D=()=>rs().find(({id:e})=>e===os()),ls=()=>{var e;return(e=D())==null?void 0:e.secret},is=()=>{var e;return new URL(((e=D())==null?void 0:e.url)??"").origin.replace("http","ws")},cs=(e,t={})=>{const o=new URLSearchParams(t);o.set("token",ls()??"");const a=Ae(`${is()}/${e}?${o.toString()}`),s=ze(a,"message");return R(()=>{var r;return s()?JSON.parse((r=s())==null?void 0:r.data):null})},[ds,De]=m(u("halloween"),{name:"theme",storage:localStorage}),us=b('<li class="tooltip tooltip-bottom">'),ps=b('<div class="drawer drawer-end w-auto sm:ml-auto"><input id="themes" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="themes" class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side"><label for="themes" class="drawer-overlay"></label><ul class="menu rounded-l-box gap-2 bg-base-300 p-2">'),gs=b('<li class="btn btn-xs">'),ms=b('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal menu-lg gap-2 p-0">'),fs=b('<ul class="navbar sticky inset-x-0 top-0 z-50 flex w-auto items-center justify-center bg-base-300 px-4 shadow-lg"><div class="navbar-start gap-4"><div class="drawer w-auto lg:hidden"><input id="navs" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="navs" class="btn btn-circle drawer-button btn-sm"></label></div><div class="drawer-side"><label for="navs" class="drawer-overlay"></label><ul class="menu rounded-r-box min-h-full w-2/5 gap-2 bg-base-300 pt-20"></ul></div></div></div><div class="navbar-end"><div class="flex items-center gap-2">'),hs=b("<li>"),vs=({href:e,tooltip:t,children:o})=>(()=>{const a=us();return O(a,"data-tip",t),p(a,l(J,{class:"rounded-box",href:e,children:o})),a})(),ys=()=>(()=>{const e=ps(),t=e.firstChild,o=t.nextSibling,a=o.firstChild,s=o.nextSibling,n=s.firstChild,r=n.nextSibling;return p(a,l(Be,{})),p(r,l(W,{each:mt,children:i=>(()=>{const c=gs();return c.$$click=()=>De(i),O(c,"data-theme",i),p(c,i),c})()})),e})(),bs=()=>{const[e]=ye(),t=()=>[{href:v.Overview,name:e("overview"),icon:l(Ge,{})},{href:v.Proxies,name:e("proxies"),icon:l(He,{})},{href:v.Rules,name:e("rules"),icon:l(Oe,{})},{href:v.Conns,name:e("connections"),icon:l(We,{})},{href:v.Log,name:e("logs"),icon:l(Xe,{})},{href:v.Config,name:e("config"),icon:l(Ve,{})}],o=Fe(),[a,s]=u(!1);return(()=>{const n=fs(),r=n.firstChild,i=r.firstChild,c=i.firstChild,d=c.nextSibling,g=d.firstChild,h=d.nextSibling,L=h.firstChild,y=L.nextSibling,x=r.nextSibling,w=x.firstChild;return c.addEventListener("change",C=>s(C.target.checked)),p(g,l(Re,{})),p(y,l(W,{get each(){return t()},children:({href:C,name:U})=>(()=>{const j=hs();return j.$$click=()=>s(!1),p(j,l(J,{href:C,children:U})),j})()})),p(r,l(Ps,{}),null),p(n,l(S,{get when(){return o.pathname!==v.Setup},get children(){const C=ms(),U=C.firstChild;return p(U,l(W,{get each(){return t()},children:({href:j,name:Te,icon:Se})=>l(vs,{href:j,tooltip:Te,children:Se})})),C}}),x),p(w,l(ys,{})),I(()=>c.checked=a()),n})()};G(["click"]);const xs=b("<span>"),ws=e=>{const[t]=ye(),{latencyMap:o}=Z(),[a,s]=u(""),n=R(()=>o()[e.name]);return H(()=>{s("text-success"),n()>$().HIGH?s("text-error"):n()>$().MEDIUM&&s("text-warning")}),l(S,{get when(){return R(()=>typeof n()=="number")()&&n()!==E.NOT_CONNECTED},get children(){const r=xs();return p(r,n,null),p(r,()=>t("ms"),null),I(()=>M(r,`whitespace-nowrap text-xs ${a()}`)),r}})},Cs=b('<div class="text-md flex items-center gap-1 whitespace-nowrap font-bold uppercase sm:text-xl"><span>(</span><a class="text-primary transition-transform hover:rotate-90 hover:scale-125" href="https://github.com/metacubex/metacubexd" target="_blank">xd</a><span>)'),Ps=()=>(()=>{const e=Cs(),t=e.firstChild;return p(e,l(J,{class:"bg-gradient-to-br from-primary to-secondary bg-clip-text text-transparent",get href(){return D()?"/":"/setup"},children:"metacube"}),t),e})(),$s=b('<div class="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur"><div class="flex justify-end gap-2">'),Ds=b('<dialog class="modal modal-bottom sm:modal-middle"><div class="modal-box p-0"><div><div class="flex items-center gap-4 text-xl font-bold"><span></span></div></div><div class="p-4"></div></div><form method="dialog" class="modal-backdrop"><button>'),Ts="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur",Ra=e=>{let t;return(()=>{const o=Ds(),a=o.firstChild,s=a.firstChild,n=s.firstChild,r=n.firstChild,i=s.nextSibling;return Ze(c=>{var d;return(t=c)&&((d=e.ref)==null?void 0:d.call(e,c))},o),a.$$contextmenu=c=>c.preventDefault(),p(n,()=>e.icon,r),p(r,()=>e.title),p(s,l(ue,{class:"btn-circle btn-sm",onClick:()=>t==null?void 0:t.close(),get icon(){return l(Je,{size:20})}}),null),p(i,ie(()=>e.children)),p(a,l(S,{get when(){return e.action},get children(){const c=$s(),d=c.firstChild;return p(d,()=>e.action),c}}),null),I(()=>M(s,T(Ts,"top-0 justify-between"))),o})()};G(["contextmenu"]);const Ss=b('<div><div class="flex items-center justify-between gap-2"><span class="truncate text-left text-sm"></span></div><div class="flex items-center justify-between gap-1"><div></div><div class="text-xs">'),Ba=e=>{const{proxyLatencyTest:t,proxyLatencyTestingMap:o}=Z(),{proxyName:a,isSelected:s,onClick:n}=e,{proxyNodeMap:r}=Z(),i=R(()=>r()[a]),c=()=>{var d,g,h;return Gt((d=i())==null?void 0:d.type)?(g=i())!=null&&g.xudp?"xudp":(h=i())!=null&&h.udp?"udp":null:null};return(()=>{const d=Ss(),g=d.firstChild,h=g.firstChild,L=g.nextSibling,y=L.firstChild,x=y.nextSibling;return Ee(d,"click",n,!0),O(d,"title",a),p(h,a),p(g,l(ue,{class:"btn-circle btn-ghost h-auto min-h-0 w-auto",get icon(){return l(Qe,{size:20,get class(){return T(o()[a]&&"animate-pulse text-success")}})},onClick:w=>{w.stopPropagation(),t(a,i().provider)}}),null),p(y,()=>{var w;return Bt((w=i())==null?void 0:w.type)},null),p(y,l(S,{get when(){return c()},get children(){return` :: ${c()}`}}),null),p(x,l(ws,{get name(){return e.proxyName}})),I(w=>{const C=T("card card-bordered tooltip-bottom flex flex-col gap-1 border-neutral-focus bg-neutral p-2 text-neutral-content shadow-lg",s&&"border-primary bg-primary-content text-primary",n&&"cursor-pointer"),U=T("truncate text-xs text-slate-500",s&&"text-primary");return C!==w._v$&&M(d,w._v$=C),U!==w._v$2&&M(y,w._v$2=U),w},{_v$:void 0,_v$2:void 0}),d})()};G(["click"]);const Ls=b('<div><div class="flex-1 overflow-y-auto p-2 sm:p-4">'),ks=N(()=>q(()=>import("./Setup-fd59cd5b.js"),["./Setup-fd59cd5b.js","./vendor-0f159d83.js"],import.meta.url)),_s=N(()=>q(()=>import("./Overview-b8fcd968.js"),["./Overview-b8fcd968.js","./vendor-0f159d83.js"],import.meta.url)),Ms=N(()=>q(()=>import("./Connections-67765b8d.js"),["./Connections-67765b8d.js","./vendor-0f159d83.js","./index-5463170e.js","./ConfigTitle-5a7980bc.js","./global-b979f772.js"],import.meta.url)),Is=N(()=>q(()=>import("./Logs-f2050c8d.js"),["./Logs-f2050c8d.js","./vendor-0f159d83.js","./index-5463170e.js","./ConfigTitle-5a7980bc.js"],import.meta.url)),Ns=N(()=>q(()=>import("./Proxies-73c07e2a.js"),["./Proxies-73c07e2a.js","./vendor-0f159d83.js","./global-b979f772.js","./ConfigTitle-5a7980bc.js"],import.meta.url)),qs=N(()=>q(()=>import("./Rules-a8eb592b.js"),["./Rules-a8eb592b.js","./vendor-0f159d83.js","./global-b979f772.js"],import.meta.url)),Us=N(()=>q(()=>import("./Config-67aa37b5.js"),["./Config-67aa37b5.js","./vendor-0f159d83.js","./ConfigTitle-5a7980bc.js"],import.meta.url)),js=()=>{const e=cs("connections");return H(()=>It(e())),null},As=()=>{const e=Ke(),t=Ye();return H(()=>{St()&&De(t()?kt():Lt())}),et(()=>{D()||e(v.Setup)}),l(Pt,{get locale(){return Ct()},get children(){const o=Ls(),a=o.firstChild;return p(o,l(bs,{}),a),p(a,l(tt,{get children(){return[l(S,{get when(){return D()},get children(){return[l(P,{get path(){return v.Overview},component:_s}),l(P,{get path(){return v.Proxies},component:Ns}),l(P,{get path(){return v.Rules},component:qs}),l(P,{get path(){return v.Conns},component:Ms}),l(P,{get path(){return v.Log},component:Is}),l(P,{get path(){return v.Config},component:Us}),l(P,{path:"*",get element(){return l(st,{get href(){return v.Overview}})}})]}}),l(P,{get path(){return D()?v.Setup:"*"},component:ks})]}}),null),p(a,l(S,{get when(){return D()},get children(){return l(js,{})}}),null),p(o,l(at,{position:"bottom-center"}),null),I(s=>{const n=T("relative flex h-screen flex-col overscroll-y-none subpixel-antialiased p-safe",Tt()?"font-twemoji":"font-no-twemoji"),r=ds();return n!==s._v$&&M(o,s._v$=n),r!==s._v$2&&O(o,"data-theme",s._v$2=r),s},{_v$:void 0,_v$2:void 0}),o}})};nt.extend(ot);rt(()=>l(it,{get source(){return lt()},get children(){return l(As,{})}}),document.getElementById("root"));export{Z as $,ga as A,ue as B,ft as C,Rs as D,yt as E,ia as F,da as G,pa as H,Js as I,Zs as J,fa as K,he as L,Ra as M,Ws as N,Vs as O,k as P,Hs as Q,ge as R,Dt as S,_ as T,X as U,Y as V,Os as W,Xs as X,Gs as Y,$ as Z,ws as _,os as a,Aa as a0,ja as a1,Fs as a2,Ba as a3,Ma as a4,Ia as a5,Na as a6,A as a7,Ct as a8,f as a9,D as aA,La as aB,ka as aa,ya as ab,Pa as ac,ba as ad,Da as ae,xa as af,$a as ag,wa as ah,Ta as ai,Ca as aj,Sa as ak,v as al,vt as am,B as an,Qs as ao,St as ap,Ks as aq,mt as ar,Ys as as,Lt as at,kt as au,Es as av,Bs as aw,Tt as ax,_a as ay,qa as az,za as b,cs as c,fe as d,rs as e,ht as f,ta as g,ra as h,la as i,ea as j,Mt as k,xe as l,ha as m,me as n,Ut as o,na as p,sa as q,va as r,Fa as s,Ua as t,ye as u,oa as v,aa as w,ma as x,ca as y,ua as z};
